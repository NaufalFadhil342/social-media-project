"use strict";(self.webpackChunksocial_media_project=self.webpackChunksocial_media_project||[]).push([[576],{2576:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var r=t(4165),s=t(1413),i=t(5861),c=t(885),u=t(9062),a=t(2791),d=t(8436),o=t(6910),l=t(184),p=function(e){var n=e.post,t=(0,o.F_)(d.I),s=(0,c.Z)(t,1)[0],p=(0,a.useState)(null),f=(0,c.Z)(p,2),h=f[0],v=f[1],x=(0,a.useState)(null),m=(0,c.Z)(x,2),Z=m[0],k=m[1],j=(0,u.hJ)(d.db,"likes"),I=(0,u.hJ)(d.db,"dislikes"),w=(0,u.IO)(j,(0,u.ar)("postId","==",n.id)),b=(0,u.IO)(I,(0,u.ar)("postId","==",n.id)),N=(0,a.useCallback)((0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.PL)(w);case 2:n=e.sent,v(n.docs.map((function(e){return{userId:e.data().userId}})));case 4:case"end":return e.stop()}}),e)}))),[]),C=(0,a.useCallback)((0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.PL)(b);case 2:n=e.sent,k(n.docs.map((function(e){return{userId:e.data().userId}})));case 4:case"end":return e.stop()}}),e)}))),[]);(0,a.useEffect)((function(){N(),C()}),[N,C]);var _=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ET)(j,{userId:null===s||void 0===s?void 0:s.uid,postId:n.id});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ET)(I,{userId:null===s||void 0===s?void 0:s.uid,postId:n.id});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"postId",children:[(0,l.jsxs)("div",{className:"top",children:[(0,l.jsx)("h3",{children:n.title}),(0,l.jsx)("p",{children:n.description})]}),(0,l.jsxs)("div",{className:"bottom",children:[(0,l.jsxs)("p",{children:["@",n.username]}),(0,l.jsxs)("div",{className:"toggle-button",children:[(0,l.jsxs)("div",{className:"likes",children:[(0,l.jsx)("button",{onClick:_,children:"\ud83d\udc4d"}),(0,l.jsxs)("p",{children:["Likes: ",null===h||void 0===h?void 0:h.length," "]})]}),(0,l.jsxs)("div",{className:"dislikes",children:[(0,l.jsx)("button",{onClick:g,children:"\ud83d\udc4e"}),(0,l.jsxs)("p",{children:["Dislikes: ",null===Z||void 0===Z?void 0:Z.length," "]})]})]})]})]})},f=function(){var e=(0,a.useState)(null),n=(0,c.Z)(e,2),t=n[0],o=n[1],f=(0,u.hJ)(d.db,"posts"),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.PL)(f);case 2:n=e.sent,o(n.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{id:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){h()})),(0,l.jsx)("header",{className:"home",children:null===t||void 0===t?void 0:t.map((function(e){return(0,l.jsx)(p,{post:e},e.id)}))})}}}]);
//# sourceMappingURL=576.f0f0a13e.chunk.js.map